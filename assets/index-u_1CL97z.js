import{r as m,j as e}from"./react-CvP7hmnr.js";import{c as F}from"./react-dom-D6BGZ2dA.js";import{i as P}from"./i18next-BTU9ikPr.js";import{B as O}from"./i18next-http-backend-DtyV-u17.js";import{i as z,u as j}from"./react-i18next-qfbw933G.js";import{B as N,F as D,S as A,M as B,T as C,a as w,b as H,L as R,A as I,D as Y,R as $,d as S,e as k,f as T,C as W,h as q,i as K,j as U,I as G,k as J,l as V,m as Z,n as _,o as Q,p as X,q as ee,r as te}from"./@mui-C3GzwCoB.js";import{d as v}from"./dayjs-DyEn2GqC.js";import{u as se,a as ce,b as ae,D as re}from"./react-dnd-BAtfxEFm.js";import{H as ne}from"./react-dnd-html5-backend-1HQjlkwI.js";import"./scheduler-BNqrtbQi.js";import"./clsx-B-dksMZM.js";import"./@babel-BtohYyOd.js";import"./@emotion-DXnfI1hL.js";import"./hoist-non-react-statics-C48UpQYE.js";import"./react-is-CnyDuYXe.js";import"./stylis-DDa9OTMq.js";import"./prop-types-BXxft_51.js";import"./react-transition-group-Bhd1JnkN.js";import"./dom-helpers-D0mFdbeO.js";import"./@popperjs-CMBiYTiD.js";import"./dnd-core-Cn_rtKtY.js";import"./redux-BFxtlG_c.js";import"./@react-dnd-CcwRs9xb.js";import"./fast-deep-equal-fc5YKFS2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();P.use(O).use(z).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/todo-app/locales/{{lng}}/{{ns}}.json"},ns:["translation"],defaultNS:"translation"});const oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%207410%203900'%3e%3crect%20width='7410'%20height='3900'%20fill='%23b22234'/%3e%3cg%20fill='%23fff'%3e%3cpath%20d='M0%20300h7410v300H0zM0%20900h7410v300H0zM0%201500h7410v300H0zM0%202100h7410v300H0zM0%202700h7410v300H0zM0%203300h7410v300H0z'/%3e%3c/g%3e%3crect%20width='2964'%20height='2100'%20fill='%233c3b6e'/%3e%3cg%20fill='%23fff'%3e%3cg%20id='s18'%3e%3cg%20id='s9'%3e%3cg%20id='s5'%3e%3cg%20id='s4'%3e%3cpath%20id='s'%20d='M247%2090l70.53%20217.44L0%20170.6h494L176.47%20307.44%20247%2090z'/%3e%3cuse%20href='%23s'%20x='494'/%3e%3cuse%20href='%23s'%20x='988'/%3e%3cuse%20href='%23s'%20x='1482'/%3e%3c/g%3e%3cuse%20href='%23s'%20x='1976'/%3e%3c/g%3e%3cuse%20href='%23s4'%20y='210'/%3e%3c/g%3e%3cuse%20href='%23s9'%20y='420'/%3e%3c/g%3e%3cuse%20href='%23s18'%20y='840'/%3e%3cuse%20href='%23s9'%20y='1680'/%3e%3c/g%3e%3c/svg%3e",ie="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='flag-icons-fr'%20viewBox='0%200%20640%20480'%3e%3cg%20fill-rule='evenodd'%20stroke-width='1pt'%3e%3cpath%20fill='%230055a4'%20d='M0%200h213.3v480H0z'/%3e%3cpath%20fill='%23fff'%20d='M213.3%200h213.4v480H213.3z'/%3e%3cpath%20fill='%23ef4135'%20d='M426.7%200H640v480H426.7z'/%3e%3c/g%3e%3c/svg%3e",le="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='flag-icons-de'%20viewBox='0%200%20640%20480'%3e%3cg%20fill-rule='evenodd'%20stroke-width='1pt'%3e%3cpath%20fill='%23000'%20d='M0%200h640v160H0z'/%3e%3cpath%20fill='%23D00'%20d='M0%20160h640v160H0z'/%3e%3cpath%20fill='%23FFCE00'%20d='M0%20320h640v160H0z'/%3e%3c/g%3e%3c/svg%3e",de=()=>{const{i18n:t}=j(),s={en:{code:"US",name:"English",image:oe},fr:{code:"FR",name:"FranÃ§ais",image:ie},de:{code:"DE",name:"Deutsch",image:le}},[r,i]=m.useState("en"),a=c=>{const l=c.target.value;i(l),t.changeLanguage(l)};return e.jsx(N,{children:e.jsx(D,{fullWidth:!0,children:e.jsx(A,{"data-testid":"language-select",labelId:"language-select-label",id:"language-select",value:r,onChange:a,sx:{"border-radius":"25px","max-width":"fit-content","& .MuiOutlinedInput-input":{display:"flex",padding:"10px"}},children:Object.entries(s).map(([c,{code:l,name:d,image:u}])=>e.jsxs(B,{value:c,"data-testid":`language-menuitem-${c}`,className:"cb-flex cb-items-center cb-py-2 cb-px-4",children:[e.jsx(N,{component:"img",src:u,alt:`${d} flag`,sx:{width:24,height:24,borderRadius:"50%",objectFit:"cover",marginRight:1.5},"data-testid":`flag-${l}`}),e.jsx(C,{className:"cb-text-sm",children:d})]},c))})})})};function me(){const{t}=j(),s=v().format("MMMM D, YYYY");return e.jsxs("div",{className:"cb-bg-blue-200 cb-flex cb-justify-between cb-px-8 cb-py-10 cb-flex-wrap-reverse cb-gap-4","data-testid":"welcome-container",children:[e.jsxs("div",{children:[e.jsx("p",{className:"cb-text-sm cb-text-gray-500",children:s}),e.jsx("h3",{className:"cb-text-blue-500",children:t("welcome.title")}),e.jsx("p",{className:"cb-text-sm cb-text-gray-600 cb-mb-4",children:t("welcome.description")})]}),e.jsx(de,{})]})}var y=(t=>(t.Personal="personal",t.Work="work",t))(y||{}),o=(t=>(t.All="all",t.Pending="pending",t.Completed="completed",t))(o||{});function be(t){return v(t).valueOf()}const ge=({addTask:t})=>{const{t:s}=j(),[r,i]=m.useState(""),[a,c]=m.useState(null),[l,d]=m.useState(null),[u,f]=m.useState(y.Work),h=r.length>=3&&r.length<=25,n=h&&a&&u,g=b=>b.length===0?"":b.length<3?s("error.msg.min.char"):b.length>25?s("error.msg.max.char"):"",p=b=>{c(b),d(b?be(b):null)},x=b=>{if(b.preventDefault(),l===null||!n)return;const E={id:Date.now(),text:r,category:u,dueDate:l,status:o.Pending};t(E),i(""),c(null),d(null),f(y.Work)};return e.jsxs(N,{component:"form",onSubmit:x,className:"cb-flex cb-flex-col cb-gap-2 cb-min-w-64",children:[e.jsx("h4",{className:"cb-text-blue-500",children:s("common.new.task")}),e.jsxs(D,{children:[e.jsxs(w,{htmlFor:"taskName-input",className:"cb-text-sm cb-text-gray-600 cb-mb-2",children:[s("common.task.name"),e.jsx("span",{className:"cb-text-red-500",children:"*"})]}),e.jsx(H,{id:"taskName-input",value:r,onChange:b=>i(b.target.value),error:r.length>0&&!h,helperText:g(r),sx:{"& input":{padding:"8px 14px"}},required:!0})]}),e.jsxs(D,{children:[e.jsxs(w,{htmlFor:"due-date",className:"cb-text-sm cb-text-gray-600 cb-mb-2",children:[s("common.due.date"),e.jsx("span",{className:"cb-text-red-500",children:"*"})]}),e.jsx(R,{dateAdapter:I,children:e.jsx(Y,{value:a,onChange:p,minDate:v(),openTo:"day",format:"DD/MM/YYYY",slotProps:{textField:{id:"due-date"}},sx:{"& .MuiPickersInputBase-sectionsContainer":{padding:"8px 0"}}})})]}),e.jsxs(D,{children:[e.jsx(w,{className:"cb-text-sm cb-text-gray-600",children:s("common.category")}),e.jsxs($,{row:!0,value:u,name:"task-category","aria-labelledby":"category-label",onChange:b=>f(b.target.value),children:[e.jsx(S,{value:y.Work,control:e.jsx(k,{}),label:s("common.work")}),e.jsx(S,{value:y.Personal,control:e.jsx(k,{}),label:s("common.personal")})]})]}),e.jsx(T,{type:"submit",variant:"contained",disabled:!n,"data-testid":"todoform-add-button",children:s("common.add.task")})]})},pe=({task:t,toggleTaskCompletion:s})=>{const{t:r}=j(),i=m.useRef(null),[{isDragging:a},c,l]=se(()=>({type:"TASK",item:{id:t.id},collect:d=>({isDragging:d.isDragging()})}));return e.jsx("div",{ref:d=>{c(d),l(d)},"data-testid":"item-container",children:e.jsx(W,{variant:"outlined",ref:i,className:`cb-mb-4 ${t.status===o.Completed?"cb-bg-gray-400 cb-opacity-70":"cb-bg-white"}`,style:{opacity:a?.5:1,cursor:a?"grabbing":"grab"},children:e.jsxs(q,{className:"cb-flex cb-items-center cb-gap-2 cb-w-full",children:[e.jsxs("div",{className:"cb-flex cb-items-center cb-gap-2 cb-w-4/5",children:[e.jsx(K,{checked:t.status===o.Completed,onChange:()=>s(t.id),color:"primary"}),e.jsx("div",{className:"cb-w-full",children:e.jsxs("div",{className:"cb-flex cb-flex-col cb-justify-between cb-items-start cb-w-full",children:[e.jsx(U,{"data-testid":"item-task-category",label:t.category,size:"small",variant:"outlined",color:t.category===y.Work?"primary":"secondary",sx:{borderRadius:"16px",marginBottom:"4px"}}),e.jsx(C,{variant:"h6",className:`cb-first-letter-uppercase ${t.status===o.Completed?"cb-line-through":""}`,children:t.text}),e.jsxs(C,{variant:"body2",color:"text.secondary",children:[r("common.due.date"),":"," ",v(t.dueDate).format("dddd, D MMM YYYY")]})]})})]}),e.jsx("div",{className:"cb-flex cb-items-center cb-justify-end cb-w-1/5",children:e.jsx(G,{className:"cb-cursor-move cb-text-gray-500 hover:cb-text-gray-700","aria-label":"drag",children:e.jsx(J,{})})})]})})})},ue=({tasks:t,toggleTaskCompletion:s,deleteTask:r})=>{const i=c=>v(c).isSame(v(),"day"),a=c=>[...c].sort((l,d)=>l.dueDate-d.dueDate);return e.jsx("div",{"data-testid":"list-container",children:e.jsx("ul",{children:a(t).map(c=>e.jsx("li",{"data-testid":`todo-item-${c.id}`,className:i(c.dueDate)?"cb-border-l-4 cb-border-yellow-500":"",children:e.jsx(pe,{task:c,toggleTaskCompletion:s,deleteTask:r})},c.id))})})},he=({onConfirmDelete:t})=>{const{t:s}=j(),[r,i]=m.useState(!1),[a,c]=m.useState(null),[{isOver:l,canDrop:d},u]=ce(()=>({accept:"TASK",drop:x=>{c(x.id),i(!0)},collect:x=>({isOver:x.isOver(),canDrop:x.canDrop()})})),{isDragging:f}=ae(x=>({isDragging:x.isDragging()})),h=m.useRef(null);u(h);const n=()=>{a!==null&&(t(a),c(null)),i(!1)},g=()=>{c(null),i(!1)},p=l&&d;return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:h,className:"cb-absolute cb-bottom-4 cb-right-4 cb-sm:cb-bottom-6 cb-sm:cb-right-6 cb-w-24 cb-h-24 cb-z-40 cb-flex cb-items-center cb-justify-center","data-testid":"trashbin-container",children:e.jsx(V,{title:s("common.drop.here"),arrow:!0,children:e.jsx("div",{className:`
              cb-w-16 cb-h-16 cb-rounded-full cb-flex cb-items-center cb-justify-center cb-transition-all cb-duration-300 cb-cursor-pointer
              ${p?"cb-bg-red-400":"cb-bg-blue-400"}
              ${f?"cb-animate-shake":""}
            `,children:e.jsx(Z,{style:{color:"white",fontSize:"32px"}})})})}),e.jsxs(_,{open:r,onClose:g,"data-testid":"delete-confirm-model",children:[e.jsx(Q,{children:s("bin.confirm.model.title")}),e.jsx(X,{children:e.jsx(ee,{children:s("bin.confirm.model.desc")})}),e.jsxs(te,{"data-testid":"delete-confirm-actions",children:[e.jsx(T,{onClick:g,color:"primary",children:s("common.cancel")}),e.jsx(T,{onClick:n,color:"error",autoFocus:!0,children:s("common.delete")})]})]})]})},L="todos",xe=()=>{const t=localStorage.getItem(L);return t?JSON.parse(t):[]},fe=t=>{localStorage.setItem(L,JSON.stringify(t))},je="/todo-app/assets/empty-completed-DEJMbDi-.svg",ye="/todo-app/assets/empty-pending-ZpGjDetC.svg",ve="/todo-app/assets/empty-taskList-qa53ZfU5.svg",De=t=>{const{t:s}=j();return{[o.Completed]:{image:je,title:s("emptyState.completed.title"),description:s("emptyState.completed.description")},[o.Pending]:{image:ye,title:s("emptyState.pending.title"),description:s("emptyState.pending.description")},[o.All]:{image:ve,title:s("emptyState.all.title"),description:s("emptyState.all.description")}}[t]},M=({status:t})=>{const{image:s,title:r,description:i}=De(t);return e.jsxs("div",{className:"cb-flex cb-flex-col cb-items-center cb-text-center cb-p-1",children:[e.jsx("img",{src:s,alt:"Empty state",className:"cb-w-80 cb-mb-2"}),e.jsx("h2",{className:"cb-text-xl cb-font-bold cb-text-gray-800 cb-mb-2",children:r}),e.jsx("p",{className:"cb-text-gray-600 cb-text-sm",children:i})]})},we=function(){const[t,s]=m.useState([]),[r,i]=m.useState(o.All),{t:a}=j(),[c,l]=m.useState({[o.All]:0,[o.Completed]:0,[o.Pending]:0});m.useEffect(()=>{const n=xe();s(n)},[]),m.useEffect(()=>{fe(t),t.length===0&&i(o.All)},[t]),m.useEffect(()=>{l({[o.All]:t.length,[o.Completed]:t.filter(n=>n.status===o.Completed).length,[o.Pending]:t.filter(n=>n.status===o.Pending).length})},[t,r]);const d=n=>{s(g=>[...g,n]),console.log(t)},u=n=>{s(g=>g.map(p=>p.id===n?{...p,status:p.status===o.Completed?o.Pending:o.Completed}:p))},f=n=>{s(g=>g.filter(p=>p.id!==n))},h=t.filter(n=>r==="completed"?n.status===o.Completed:r==="pending"?n.status===o.Pending:!0);return e.jsxs("div",{className:"cb-flex cb-flex-row cb-flex-wrap cb-gap-2 cb-justify-between cb-px-8 cb-py-10","data-testid":"todo-container",children:[e.jsx("div",{className:"cb-w-[70%]","data-testid":"todo-list-wrapper",children:t.length===0?e.jsx(M,{status:r}):e.jsxs("div",{"data-testid":"todo-list-container",children:[e.jsxs("div",{className:"cb-flex cb-gap-2 cb-mb-4 cb-border-b cb-border-solid cb-pb-4 cb-border-gray-300","data-testid":"todo-status-container",children:[Object.values(o).map(n=>e.jsxs("button",{onClick:()=>i(n),className:`cb-px-4 cb-py-1 cb-rounded cb-text-sm cb-font-medium cb-border ${r===n?"cb-bg-blue-500 cb-text-white":"cb-bg-white cb-text-gray-700 cb-border-gray-300 hover:cb-bg-gray-100"}`,children:[n.charAt(0).toUpperCase()+n.slice(1),e.jsxs("span",{className:"cb-ml-1",children:["(",c[n],")"]})]},n)),e.jsxs("div",{className:"cb-text-sm cb-ml-auto cb-text-gray-700 cb-pl-4 cb-py-1",children:[a("common.sorted.by"),": ",a("common.due.date")]}),e.jsx("div",{className:"cb-fixed cb-bottom-4 cb-right-4 z-10","data-testid":"trashbin-container",children:e.jsx(he,{onConfirmDelete:f})})]}),h.length===0?e.jsx(M,{status:r}):e.jsx(ue,{tasks:h,toggleTaskCompletion:u,deleteTask:f})]})}),e.jsx("div",{className:"cb-min-w-fit","data-testid":"add-list-container",children:e.jsx(ge,{addTask:d})})]})};function Ne(){return e.jsxs("div",{"data-testid":"app-container",children:[e.jsx(me,{}),e.jsx(re,{backend:ne,children:e.jsx(we,{})})]})}F.createRoot(document.getElementById("todo-list-container")).render(e.jsx(m.StrictMode,{children:e.jsx(Ne,{})}));
